{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","utils/request-utils.js","components/row.js","components/table.js","index.js"],"names":["_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","_toConsumableArray","arr","Array","isArray","arr2","_arrayWithoutHoles","iter","Symbol","iterator","toString","from","_iterableToArray","TypeError","_nonIterableSpread","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Row","data","_this","this","edit","node","innerText","document","createElement","ReusableRowsVector","deleteByKey","used","find","n","filter","unused","concat","console","error","insert","slice","updateByKey","protoProps","staticProps","Table","_this2","update","url","xhr","XMLHttpRequest","open","send","Promise","resolve","reject","onreadystatechange","readyState","status","jsonResponse","JSON","parse","responseText","buildGetRequest","then","res","rerender","catch","FAKE_RESPONSE","removeAllChildren","hasChildNodes","removeChild","firstChild","_ref","full_count","version","dataKeys","deletedKeys","rows","map","row","rowKey","every","newDataKeys","updatedKeys","some","forEach","r","appendChild","setInterval","window","onload","body","getElementsByTagName","table"],"mappings":"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","file":"static/js/main.f4e5dc3b.chunk.js","sourcesContent":["import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export const buildGetRequest = url => {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open('GET', url);\r\n\r\n    xhr.send();\r\n\r\n    return new Promise(function(resolve, reject) {\r\n        xhr.onreadystatechange = () => {\r\n            if (xhr.readyState === 4) {\r\n                if (xhr.status === 200) {\r\n                    const jsonResponse = JSON.parse(xhr.responseText);\r\n                    resolve(jsonResponse);\r\n                } else {\r\n                    reject();\r\n                }\r\n            }\r\n        };\r\n    });\r\n};\r\n","class Row {\r\n    constructor(key, data) {\r\n        this.node = document.createElement('div');\r\n        this.edit(key, data);\r\n    }\r\n\r\n    edit = (key, data) => {\r\n        this.node.innerText = data;\r\n        this.key = key;\r\n    };\r\n}\r\n\r\nexport default Row;\r\n","import { buildGetRequest } from '../utils/request-utils';\r\nimport FAKE_RESPONSE from '../fake-response';\r\nimport Row from './row';\r\n\r\nconst UPDATE_INTERVAL = 4000;\r\nconst URL = 'https://data-live.flightradar24.com/zones/fcgi/feed.js?bounds=56.84,55.27,33.48,41.48';\r\n\r\nclass ReusableRowsVector {\r\n    constructor() {\r\n        this.unused = [];\r\n        this.used = [];\r\n    }\r\n\r\n    get data() {\r\n        return this.used;\r\n    }\r\n\r\n    deleteByKey = key => {\r\n        const node = this.used.find(n => n.key === key);\r\n        if (!node) {\r\n            console.error('Deleting key not found');\r\n            return;\r\n        }\r\n        this.used = this.used.filter(n => n.key !== key);\r\n        this.unused = [...this.unused, node];\r\n    };\r\n\r\n    insert = (key, data) => {\r\n        let node;\r\n        if (!this.unused.length) {\r\n            node = new Row(key, data);\r\n        } else {\r\n            node = this.unused[0];\r\n            this.unused = this.unused.slice(1);\r\n            node.edit(key, data);\r\n        }\r\n        this.used = [...this.used, node];\r\n    };\r\n\r\n    updateByKey = (key, data) => {\r\n        const node = this.used.find(n => n.key === key);\r\n        if (!node) {\r\n            console.error('Editing key not found');\r\n            return;\r\n        } else {\r\n            node.edit(key, data);\r\n        }\r\n    };\r\n}\r\n\r\nclass Table {\r\n    constructor() {\r\n        this.node = document.createElement('div');\r\n        this.rows = new ReusableRowsVector();\r\n        this.update();\r\n        setInterval(() => {\r\n            this.update();\r\n        }, UPDATE_INTERVAL);\r\n    }\r\n\r\n    update = () => {\r\n        const request = buildGetRequest(URL);\r\n        request\r\n            .then(res => {\r\n                this.rerender(res);\r\n            })\r\n            .catch(res => {\r\n                this.rerender(FAKE_RESPONSE);\r\n            });\r\n    };\r\n\r\n    removeAllChildren = () => {\r\n        while (this.node.hasChildNodes()) {\r\n            this.node.removeChild(this.node.firstChild);\r\n        }\r\n    };\r\n\r\n    rerender = ({ full_count, version, ...data }) => {\r\n        const dataKeys = Object.keys(data);\r\n        const deletedKeys = this.rows.data.map(row => row.key).filter(rowKey => dataKeys.every(key => rowKey !== key));\r\n        const newDataKeys = dataKeys.filter(key => this.rows.data.every(row => row.key !== key));\r\n        const updatedKeys = dataKeys.filter(key => this.rows.data.some(row => row.key !== key));\r\n\r\n        deletedKeys.forEach(key => {\r\n            this.rows.deleteByKey(key);\r\n        });\r\n        newDataKeys.forEach(key => {\r\n            this.rows.insert(key, data[key]);\r\n        });\r\n        updatedKeys.forEach(key => {\r\n            this.rows.updateByKey(key, data[key]);\r\n        });\r\n\r\n        this.removeAllChildren();\r\n\r\n        this.rows.data.forEach(r => this.node.appendChild(r.node));\r\n    };\r\n}\r\n\r\nexport default Table;\r\n","import Table from './components/table';\r\n\r\nwindow.onload = () => {\r\n    const body = document.getElementsByTagName('body')[0];\r\n    const table = new Table();\r\n    body.appendChild(table.node);\r\n};\r\n"],"sourceRoot":""}